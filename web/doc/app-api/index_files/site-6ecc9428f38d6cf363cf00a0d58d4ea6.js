// Used to detect initial (useless) popstate.
// If history.state exists, assume browser isn't going to fire initial popstate.
popped="state"in window.history,initialURL=location.href,$(document).ready(function(){BrowserFallbacks.init(),Search.init(),Dropdowns.init(),Forms.init(),Downloads.init(),DownloadBox.init(),AboutContent.init(),FlippyBook.init();var a=a||[];(function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.id="gauges-tracker",a.setAttribute("data-site-id","4f919d1df5a1f504b3000026"),a.src="//secure.gaug.es/track.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})()});var DownloadBox={init:function(){$("#gui-os-filter").addClass("visible");var a=window.session.browser.os;a=="Mac"?($(".monitor").addClass("mac"),$("#download-link").text("Download for Mac").attr("href","/download/mac"),$("#gui-link").removeClass("mac").addClass("gui"),$("#gui-link").text("Mac GUIs").attr("href","/download/gui/mac"),$("#gui-os-filter").attr("data-os","mac"),$("#gui-os-filter").text("Only show GUIs for my OS (Mac)")):a=="Windows"?($(".monitor").addClass("windows"),$("#download-link").text("Download for Windows").attr("href","/download/win"),$("#gui-link").removeClass("mac").addClass("gui"),$("#gui-link").text("Windows GUIs").attr("href","/download/gui/win"),$("#alt-link").removeClass("windows").addClass("mac"),$("#alt-link").text("Mac Build").attr("href","/download/mac"),$("#gui-os-filter").attr("data-os","windows"),$("#gui-os-filter").text("Only show GUIs for my OS (Windows)")):a=="Linux"&&($(".monitor").addClass("linux"),$("#download-link").text("Download for Linux").attr("href","/download/linux"),$("#gui-link").removeClass("mac").addClass("gui"),$("#gui-link").text("Linux GUIs").attr("href","/download/gui/linux"),$("#alt-link").removeClass("windows").addClass("mac"),$("#alt-link").text("Mac Build").attr("href","/download/mac"),$("#gui-os-filter").attr("data-os","linux"),$("#gui-os-filter").text("Only show GUIs for my OS (Linux)"))}},BrowserFallbacks={init:function(){BrowserFallbacks.initPlaceholders()},initPlaceholders:function(){Modernizr.input.placeholder||$("input[placeholder], textarea[placeholder]").each(function(a){$(this).defaultValue($(this).attr("placeholder"),"active","inactive")})}},Search={searching:!1,currentSearch:"",selectedIndex:0,init:function(){Search.observeFocus(),Search.observeTextEntry(),Search.observeResultsClicks()},observeFocus:function(){$("form#search input").focus(function(){$(this).parent("form#search").switchClass("","focus",200)}),$("form#search input").blur(function(){Search.resetForm()})},observeTextEntry:function(){$("form#search input").keyup(function(a){Search.runSearch()}),$("form#search input").keydown(function(a){$("#search-results").not(":visible")&&a.which!=27&&($("#search-results").fadeIn(.2),Search.highlight(Search.selectedIndex));switch(a.which){case 13:return Search.selectResultOption(),!1;case 27:Search.resetForm();break;case 38:a.preventDefault(),Search.resultsNav("up");break;case 40:a.preventDefault(),Search.resultsNav("down")}})},observeResultsClicks:function(){$("#search-results").mousedown(function(a){a.preventDefault()})},runSearch:function(){var a=$("#search-text").val();if(a.length<2)return!1;Search.searching?(clearTimeout(Search.timeout),Search.timeout=setTimeout(function(){Search.searching=!1,Search.runSearch()},300)):(Search.searching=!0,a!=Search.currentSearch&&(Search.currentSearch=a,$.get("/search",{search:a},function(a){$("#search-results").html(a),Search.searching=!1},"html")))},selectResultOption:function(){var a=$("#search-results a")[Search.selectedIndex],b=$(a).attr("href");if(!a){var c=$("#search-text").val();b="/search/results?search="+c}window.location.href=b,selectedIndex=0},resultsNav:function(a){Search.selectedIndex+=a=="down"?1:-1,Search.highlight(Search.selectedIndex)},highlight:function(a){var b=$("#search-results a").removeClass("highlight");$(b[a]).addClass("highlight")},resetForm:function(){$("form#search").switchClass("focus","",200),$("#search-results").fadeOut(.2),Search.selectedIndex=0}},Dropdowns={init:function(){Dropdowns.observeTriggers()},observeTriggers:function(){$(".dropdown-trigger").click(function(a){a.preventDefault();var b=$(this).attr("data-panel-id");$(this).hasClass("active")?($(this).removeClass("active"),$("#"+b).hide()):($(this).addClass("active"),$("#"+b).show())})}},Forms={init:function(){Forms.observeCopyableInputs()},observeCopyableInputs:function(){$("input.copyable").click(function(){$(this).select()})}},Downloads={userOS:"",init:function(){Downloads.observeGUIOSFilter()},observeGUIOSFilter:function(){$("a#gui-os-filter").click(function(a){a.preventDefault(),Downloads.userOS=$(this).attr("data-os");var b=Downloads.userOS.charAt(0).toUpperCase()+Downloads.userOS.slice(1);if($(this).hasClass("filtering"))$("ul.gui-thumbnails li").switchClass("masked","",200),$(this).html("Only show GUIs for my OS ("+b+")"),$(this).removeClass("filtering"),$("#os-filter-count").hide();else{$("ul.gui-thumbnails li").not("."+Downloads.userOS).switchClass("","masked",200),$(this).html("Show GUIs for all OSes"),$(this).addClass("filtering");var c=$("ul.gui-thumbnails li."+Downloads.userOS).length;$("#os-filter-count strong").html(c),$("#os-filter-count .os").html(b),$("#os-filter-count").show()}})}},AboutContent={defaultSection:"branching-and-merging",init:function(){if($("body#about").length===0)return;$("section.about").hide(),$("section.about .bottom-nav").show(),AboutContent.observeNav(),AboutContent.observePopState(),AboutContent.showSection(AboutContent.getSection())},observePopState:function(){if(window.history&&window.history.pushState)return $(window).bind("popstate",function(a){var b;initialPop=!popped&&location.href===initialURL,popped=!0;if(initialPop)return;return b=AboutContent.getSection(),AboutContent.showSection(b)})},getSection:function(a){var b;b=location.href.substring(location.href.lastIndexOf("/")+1);if(b.length===0||b=="about")b=AboutContent.defaultSection;return b},showSection:function(a){a=="about"&&(a=AboutContent.defaultSection),$("ol#about-nav a").removeClass("current"),$("ol#about-nav a#nav-"+a).addClass("current"),$("section").hide(0,function(){$("section#"+a).show()})},observeNav:function(){$("ol#about-nav a, .bottom-nav a").click(function(a){a.preventDefault();var b=$(this).attr("data-section-id");window.history&&window.history.pushState&&history.pushState(null,$(this).html(),"/about/"+b),AboutContent.showSection(b)})}},FlippyBook={threeDee:!1,init:function(){FlippyBook.initBrowsers(),FlippyBook.observeOpenCloseClicks()},initBrowsers:function(){Modernizr.webkit&&(FlippyBook.threeDee=!0,$("#book-container").addClass("three-dee")),$("#about-book").addClass("visible")},observeOpenCloseClicks:function(){$("#book-cover-outside, #open-book").click(function(a){a.preventDefault(),$("#book-cover").removeClass("close").addClass("open"),$("#book-intro").css("z-index",""),FlippyBook.threeDee||($("#book-cover-inside").show(),$("#book-inside-page").show())}),$("#about-book").click(function(a){a.preventDefault(),$("#book-cover").removeClass("open").addClass("close");if(FlippyBook.threeDee)var b=setTimeout("$('#book-intro').css('z-index', 100)",1e3);else $("#book-cover-inside").hide(),$("#book-inside-page").hide(),$("#book-intro").css("z-index",100)})}};